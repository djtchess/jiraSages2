@use '@angular/material' as mat;

// 1. Palettes (M2-namespaced)
$dark-primary: mat.m2-define-palette(mat.$m2-indigo-palette, 700);
$dark-accent:  mat.m2-define-palette(mat.$m2-pink-palette, 600, A200, A100);
$dark-warn:    mat.m2-define-palette(mat.$m2-red-palette);

$light-primary: mat.m2-define-palette(mat.$m2-indigo-palette);
$light-accent:  mat.m2-define-palette(mat.$m2-pink-palette, A200, A100, A400);
$light-warn:    mat.m2-define-palette(mat.$m2-red-palette);

// 2. Thèmes (M2-namespaced)
$dark-theme: mat.m2-define-dark-theme((
  color: (
    primary: $dark-primary,
    accent:  $dark-accent,
    warn:    $dark-warn,
  )
));

$light-theme: mat.m2-define-light-theme((
  color: (
    primary: $light-primary,
    accent:  $light-accent,
    warn:    $light-warn,
  )
));

// 3. Inclusion core + thème clair par défaut
@include mat.core();
@include mat.all-component-themes($light-theme);


/* === Styles globaux et autres composants en mode sombre === */

html, body {
  height: 100%;
}

body {
  margin: 0;
  font-family: Roboto, "Helvetica Neue", sans-serif;
}

// Styles spécifiques au mode sombre activé sur un élément avec la classe .dark-mode
.dark-mode {
  @include mat.all-component-colors($dark-theme);

  color: white;
    .main {
    background-color: #121212;
  }

  // 1) Toolbar (hamburger & titre)
  mat-toolbar {
    background: linear-gradient(90deg, #001e4d, #003366);
    color: #cbd6f5;
  }
  mat-toolbar button.mat-icon-button {
    color: #8ab4f8 !important;
    &:hover {
      background-color: rgba(255,255,255,0.1) !important;
    }
  }

  // 2) Table globale
  .mat-table {
    background-color: #1e293b;
    color: #e0e7ff;
  }
  .mat-header-cell {
    background-color: #334155;
    color: #a8b7ff;
    font-weight: 600;
  }
  .mat-cell {
    border-bottom: 1px solid #475569;
    color: #cbd6f6;
  }
  .mat-row:hover {
    background-color: #33475b !important;
  }
  button.mat-raised-button {
    background-color: mat.m2-get-color-from-palette($dark-primary,700) !important;
    color: white !important;
    &:hover {
      background-color: mat.m2-get-color-from-palette($dark-primary,800) !important;
    }
  }

  // 3) Form fields & selects
  .mat-form-field-appearance-outline .mat-form-field-outline {
    border-color: #8ab4f8;
  }
  .mat-form-field-appearance-outline.mat-focused
    .mat-form-field-outline-thick {
    border-color: #3380ff !important;
  }
  .mat-form-field-label { color: #8ab4f8 !important; }
  .mat-form-field-infix,
  .mat-select-value { color: #fff !important; }
  .mat-select-arrow { color: #8ab4f8 !important; }
  .mat-select-panel { background: #0f1a34 !important; color: #d0d9f6 !important; }
  .mat-option { color: #d0d9f6 !important; }
  .mat-option:hover,
  .mat-option.mat-active { background: #1a2d56 !important; color: #fff !important; }

  // 4) Sprint-table paginator
  .sprint-table {
    // garde le conteneur transparent
    .mat-paginator {
      background: transparent !important;
      color: #cbd6f6 !important;
    }
    // boutons précédents/suivants
    button.mat-paginator-navigation-previous,
    button.mat-paginator-navigation-next,
    button.mat-paginator-navigation-first,
    button.mat-paginator-navigation-last {
      background: transparent !important;
      color: #cbd6f6 !important;
      &:hover {
        background: rgba(255,255,255,0.1) !important;
      }
    }
    // select page size
    .mat-paginator-range-actions .mat-select-trigger {
      color: #cbd6f6 !important;
      &:hover {
        background: rgba(255,255,255,0.1) !important;
      }
    }
  }

  // 5) Burnup-close button
  .main-content h4 button.mat-icon-button {
    color: #f87171 !important;
    &:hover {
      background: #7f1d1d !important;
    }
  }
}




/* === Styles dark mode Angular Material pour les formulaires === */

.dark-mode .mat-form-field-label {
  color: #8ab4f8 !important;
}

.dark-mode .mat-form-field-infix {
  color: #ffffff !important;
}

.dark-mode .mat-select-value {
  color: #ffffff !important;
}

.dark-mode .mat-select-arrow {
  color: #8ab4f8 !important;
}

.dark-mode .mat-select-panel {
  background-color: #0f1a34 !important;
  color: #d0d9f6 !important;
}

.dark-mode .mat-option {
  color: #d0d9f6 !important;
}

.dark-mode .mat-option:hover,
.dark-mode .mat-option.mat-active {
  background-color: #1a2d56 !important;
  color: #ffffff !important;
}

.dark-mode .mat-form-field-appearance-outline .mat-form-field-outline {
  color: #8ab4f8;
  border-color: #8ab4f8;
}

.dark-mode .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick {
  border-color: #3380ff !important;
}

/* Conteneur général */
.dark-mode .example-container {
  background-color: #0b1224;
  color: #a8b9d8;
  height: 100vh;
}

/* Sidenav */
.dark-mode mat-sidenav {
  background-color: #121d40;
  color: #c0cde8;
  box-shadow: 2px 0 12px rgba(0, 0, 50, 0.7);
}

/* Liens de navigation */
.dark-mode mat-nav-list a.mat-list-item {
  color: #a8b9d8;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Icônes dans la nav */
.dark-mode mat-nav-list a.mat-list-item mat-icon {
  color: #8ab4f8;
  margin-right: 12px;
}

/* Hover et actif sur nav items */
.dark-mode mat-nav-list a.mat-list-item:hover,
.dark-mode mat-nav-list a.mat-list-item.active {
  background-color: #1e3a73;
  color: #cbd6f5;
}

/* Toolbar */
.dark-mode mat-toolbar {
  background: linear-gradient(90deg, #001e4d 0%, #003366 100%);
  color: #cbd6f5;
}


body:not(.dark-mode) {
  background-color: #ffffff;
  color: #000000;
  font-family: Roboto, "Helvetica Neue", sans-serif;

  // Reset tables
  .mat-table {
    background-color: white;
    color: black;
  }

  // Reset autres composants si nécessaire
  .mat-header-cell {
    background-color: #f1f1f1;
    color: #333;
    font-weight: 600;
  }

  .mat-cell {
    border-bottom: 1px solid #ddd;
    color: #000;
  }

  button.mat-raised-button {
    background-color: mat.m2-get-color-from-palette(mat.$m2-indigo-palette, 500);
    color: white;

    &:hover {
      background-color: mat.m2-get-color-from-palette(mat.$m2-indigo-palette, 700);
    }
  }

  // Reset mat-paginator
  .mat-paginator {
    background-color: white;
    color: black;
  }
  .mat-paginator-range-label,
  .mat-paginator-page-size-label,
  .mat-paginator-navigation-previous,
  .mat-paginator-navigation-next {
    color: black;
  }
  .mat-paginator-icon {
    color: black;
  }
}
