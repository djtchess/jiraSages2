@use '@angular/material' as mat;

$dark-primary: mat.m2-define-palette(mat.$m2-indigo-palette, 500);
$dark-accent: mat.m2-define-palette(mat.$m2-cyan-palette, A200, A100, A400);
$dark-warn: mat.m2-define-palette(mat.$m2-red-palette);

$light-primary: mat.m2-define-palette(mat.$m2-indigo-palette, 600);
$light-accent: mat.m2-define-palette(mat.$m2-cyan-palette, 500);
$light-warn: mat.m2-define-palette(mat.$m2-red-palette);

$dark-theme: mat.m2-define-dark-theme((
  color: (
    primary: $dark-primary,
    accent: $dark-accent,
    warn: $dark-warn,
  )
));

$light-theme: mat.m2-define-light-theme((
  color: (
    primary: $light-primary,
    accent: $light-accent,
    warn: $light-warn,
  )
));

@include mat.core();
@include mat.all-component-themes($light-theme);

:root {
  color-scheme: light;
  --bg: #f2f7ff;
  --surface: rgba(255, 255, 255, 0.9);
  --surface-strong: #ffffff;
  --surface-muted: #edf3ff;
  --text: #0f1f38;
  --text-muted: #5c6f92;
  --border: #d7e3ff;
  --accent: #4776ff;
  --accent-2: #00a5ff;
  --danger: #f35c8b;
  --shadow: 0 18px 45px rgba(43, 72, 136, 0.14);
  --chart-grid: rgba(72, 98, 150, 0.22);
  --chart-label: #465b83;
  --btn-fg-on-accent: #f7fbff;
  --btn-fg-on-light: #0f1f38;
}

html, body { height: 100%; }

body {
  margin: 0;
  font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  color: var(--text);
  background:
    radial-gradient(900px 500px at 8% -6%, rgba(71, 118, 255, 0.18), transparent 60%),
    radial-gradient(900px 560px at 100% 0%, rgba(0, 165, 255, 0.14), transparent 62%),
    var(--bg);
}

body::before {
  content: '';
  pointer-events: none;
  position: fixed;
  inset: 0;
  background: linear-gradient(110deg, rgba(255,255,255,0.22), transparent 45%, rgba(255,255,255,0.08));
  mix-blend-mode: soft-light;
  z-index: -1;
}

body.dark-mode {
  @include mat.all-component-colors($dark-theme);
  color-scheme: dark;
  --bg: #060c1f;
  --surface: rgba(11, 21, 46, 0.86);
  --surface-strong: #0e1b3a;
  --surface-muted: #132548;
  --text: #e4ecff;
  --text-muted: #9eb4dd;
  --border: rgba(130, 162, 225, 0.32);
  --accent: #7ca8ff;
  --accent-2: #44d8ff;
  --danger: #ff7a93;
  --shadow: 0 22px 55px rgba(0, 0, 0, 0.42);
  --chart-grid: rgba(129, 166, 236, 0.2);
  --chart-label: #b7cbef;
  --btn-fg-on-accent: #08142f;
  --btn-fg-on-light: #dce7ff;
}

.main-content {
  padding: 1rem 1.3rem 2rem;
}

.futur-card,
.mat-mdc-card,
.modern-table,
.kpi-card,
.calendar-container,
.info-box,
.ticket-table-container,
.filters,
.table-card,
.detail-panel,
.epic-view,
.chart-wrap {
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
}

button,
.mat-mdc-button,
.mat-mdc-raised-button,
.mat-mdc-unelevated-button,
.mat-mdc-stroked-button,
.mat-mdc-outlined-button,
.mat-mdc-icon-button,
.save-btn,
.reset-btn,
.export-btn {
  border-radius: 12px !important;
  font-weight: 700 !important;
  letter-spacing: 0.2px;
  transition: transform .18s ease, box-shadow .22s ease, filter .22s ease;
}

button:hover,
.mat-mdc-button:hover,
.mat-mdc-raised-button:hover,
.mat-mdc-unelevated-button:hover,
.mat-mdc-stroked-button:hover,
.mat-mdc-outlined-button:hover,
.save-btn:hover,
.reset-btn:hover,
.export-btn:hover {
  transform: translateY(-1px);
  filter: brightness(1.04);
}

.mat-mdc-raised-button,
.mat-mdc-unelevated-button,
.save-btn,
.reset-btn,
.export-btn {
  background: linear-gradient(92deg, var(--accent), var(--accent-2)) !important;
  color: var(--btn-fg-on-accent) !important;
  border: 1px solid color-mix(in srgb, var(--accent) 70%, #ffffff 10%) !important;
  box-shadow: 0 10px 24px color-mix(in srgb, var(--accent) 30%, transparent) !important;
}

.mat-mdc-stroked-button,
.mat-mdc-outlined-button,
.mat-mdc-button {
  background: color-mix(in srgb, var(--surface-muted) 84%, transparent) !important;
  color: var(--btn-fg-on-light) !important;
  border: 1px solid var(--border) !important;
}

.mat-mdc-icon-button {
  color: var(--btn-fg-on-light) !important;
  background: color-mix(in srgb, var(--surface-muted) 80%, transparent);
}

.mdc-data-table__cell,
.mdc-data-table__header-cell,
.mat-mdc-select-value-text,
.mdc-text-field__input,
.mat-mdc-paginator {
  color: var(--text) !important;
}

.mat-mdc-header-row,
.mat-mdc-table .mat-mdc-header-cell {
  background: color-mix(in srgb, var(--surface-muted) 84%, transparent);
}

.mat-mdc-row:hover .mat-mdc-cell {
  background: color-mix(in srgb, var(--accent) 10%, var(--surface));
}
